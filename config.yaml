# =============================================================================
# Paradex BTC-USD-PERP Market Making Bot - Configuration (Pro Optimal)
# =============================================================================
# Fee breakeven: full_spread > 2 × $97k × 0.00003 = $5.82
# Optimal: quotes 1-4层 from BBO, maximum fill rate, 1s refresh
# half_spread = max(min_half_spread, spread × spread_factor + kappa × sigma)

# ============ Platform Settings ============
paradex:
  env: "mainnet"                   # mainnet / testnet
  market: "BTC-USD-PERP"
  profile: "pro"                   # pro (800/s, 0.003% maker fee)

# ============ Core Market Making Parameters ============
strategy:
  # -- Spread公式: half_spread = max(min_half_spread, spread×spread_factor + kappa×sigma)
  # -- 目标: half_spread ≈ $4-8 (full $8-16), 距BBO 1-4层
  gamma: 0.10                      # 低风险厌恶: fair price偏移更平滑
                                   # 0.10 × 0.01pos × $20σ² = $0.40 偏移 (极温和)
  kappa: 0.30                      # 核心参数: 波动率放大器降至最优
                                   # σ=$10: 0.3×10=$3 (min_half兜底=$4)
                                   # σ=$15: 0.3×15=$4.5, σ=$20: 0.3×20=$6
                                   # σ=$30: 0.3×30=$9 (vs原0.5×30=$15, 省40%)
  spread_factor: 0.25              # 市场spread系数 (原0.4硬编码)
                                   # spread=$6时: 0.25×6=$1.5 (vs原0.4×6=$2.4)
                                   # 1s刷新下宽spread≠高风险, 可以降低
  min_half_spread: 4.0             # Fee breakeven=$2.91, buffer=$1.09
                                   # 保底: full $8 > $5.82 breakeven ✓
  refresh_interval: 1.0            # 1秒刷新 (Pro: 3 calls/s << 800/s limit)
  base_size: 0.003                 # $291 notional, maker fee=$0.009/fill
  max_position: 0.01               # $970 notional, ~$49 margin / $500
  vol_window: 20                   # 20s波动率窗口: 更快反应当前市况
  min_sigma: 5.0                   # σ下限$5: kappa×5=$1.5, 被min_half=$4兜住
  momentum_window: 45              # 45s动量窗口: 快速感知趋势
  momentum_threshold: 200          # $200才触发 (BTC 45s动$200 = 年化几次)
                                   # 最大化报价时间, 几乎不触发
  vol_pause_threshold: 300         # $300才暂停 (只在极端黑天鹅暂停)
  tick_size: 1.0                   # BTC-USD-PERP tick size ($1)

# ============ OBI (Order Book Imbalance) Overlay ============
obi:
  enabled: true
  alpha: 0.5                       # 快速EMA跟踪orderbook变化
  threshold: 0.40                  # 高阈值: 只在明确的失衡时才屏蔽
                                   # 0.35→0.40: 减少误杀, 更多报价时间
  depth: 5                         # Top 5 levels

# ============ Risk Management ============
risk:
  max_loss_per_trade: 3.00         # 0.01 BTC × $300 move
  max_loss_per_hour: 10.00         # 每小时止损
  max_loss_per_day: 25.00          # 每日止损 = 5% of $500
  inventory_timeout: 45            # 45s = 45次报价机会 @ 1s刷新
  emergency_timeout: 120           # 2分钟强平
  max_unrealized_loss: 5.00        # $5 unrealized loss触发平仓
  consecutive_loss_pause: 7        # 7次连亏才触发circuit breaker
  consecutive_loss_cooldown: 30    # 30s cooldown
  maker_fee_rate: 0.00003          # Pro: 0.003%
  taker_fee_rate: 0.0002           # Pro: 0.02%

# ============ Rate Limits (Pro Profile) ============
rate_limit:
  max_orders_per_second: 100       # Pro: 800/s
  max_orders_per_minute: 5000      # Pro: 17250/min
  max_orders_per_hour: 50000       # Effectively unlimited
  max_orders_per_day: 500000       # Effectively unlimited

# ============ Trading Schedule (UTC) ============
schedule:
  active_hours_utc: [6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]
  pause_hours_utc: [22, 23, 0, 1, 2, 3, 4]
                                   # 扩展活跃时间6-20 UTC (覆盖亚洲+欧洲+美国开盘)
                                   # 只在深夜低流动性时段暂停

# ============ Logging ============
logging:
  level: "INFO"                    # DEBUG / INFO / WARNING / ERROR
  trade_csv: "trades.csv"          # Trade log file path
  console_interval: 10             # Status print interval (sec)
